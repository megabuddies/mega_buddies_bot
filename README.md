# MegaBuddies Telegram Bot

Телеграм-бот для проверки наличия пользователей в базе данных и массовой рассылки сообщений.

## Возможности

* Проверка введенной пользователем информации на наличие в базе данных (вайтлисте)
* Регистрация всех пользователей, которые взаимодействуют с ботом
* Массовая рассылка сообщений всем пользователям бота
* Администраторские команды для управления базой данных
* Экспорт данных в CSV формат

## Установка и настройка

1. Клонируйте репозиторий:

```
git clone https://github.com/megabuddies/mega_buddies_bot.git
cd mega_buddies_bot
```

2. Установите зависимости:

```
pip install -r requirements.txt
```

3. Создайте файл `.env` на основе примера:

```
cp .env.example .env
```

4. Отредактируйте файл `.env`, добавив токен вашего бота и ID администраторов:

```
# Токен Telegram бота
BOT_TOKEN=your_telegram_bot_token_here

# ID администраторов, разделенные запятыми
ADMIN_IDS=123456789,987654321
```

Для получения токена бота создайте нового бота через @BotFather в Telegram.
ID администраторов можно узнать, например, через бота @userinfobot.

## Безопасность

Никогда не публикуйте файл `.env` с реальными данными в публичных репозиториях!
Файл `.env` уже добавлен в `.gitignore`, чтобы предотвратить его случайную публикацию.

Если вы случайно добавили чувствительные данные в репозиторий, следуйте инструкциям в файле `clean_sensitive_data.md`.

## Запуск бота

```
python bot.py
```

## Проверка настройки

Для проверки правильности настройки переменных окружения запустите:

```
python check_env.py
```

## Административный интерфейс

Для управления базой данных можно использовать утилиту командной строки:

```
# Добавить значение в вайтлист
python admin_tools.py add <значение>

# Удалить значение из вайтлиста
python admin_tools.py remove <значение>

# Показать все значения в вайтлисте
python admin_tools.py list
```

## Доступные команды в боте

### Для всех пользователей:

* `/start` \- Начать работу с ботом
* `/help` \- Показать справку по командам
* `/check <значение>` \- Проверить значение в базе данных
* `/menu` \- Показать главное меню

### Только для администраторов:

* `/admin` \- Открыть панель администратора
* `/add <значение>` \- Добавить значение в базу данных
* `/remove <значение>` \- Удалить значение из базы данных
* `/list` \- Показать все значения в базе данных
* `/broadcast <сообщение>` \- Отправить сообщение всем пользователям
* `/stats` \- Показать статистику использования
* `/export` \- Экспортировать базу данных в CSV 